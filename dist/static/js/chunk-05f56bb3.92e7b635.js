(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05f56bb3"],{"1f0d":function(e,t,n){},"52c7":function(e,t,n){"use strict";n("1f0d")},9311:function(e,t,n){},"9ed6":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[e.isLogin?t("el-button",{staticClass:"icon",attrs:{type:"primary",icon:"el-icon-back"},on:{click:e.backCaptcha}}):e._e(),t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v("Login Form")])]),t("el-form-item",{attrs:{prop:"username"}},[t("span",{staticClass:"svg-container"},[t("i",{staticClass:"el-icon-phone"})]),t("el-input",{ref:"phone",attrs:{placeholder:"Số điện thoại",readonly:e.isLogin,name:"phone",type:"text",tabindex:"1",autocomplete:"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}})],1),e.isLogin?t("el-form-item",{attrs:{prop:"otp"}},[t("el-input",{attrs:{placeholder:"Nhập mã OTP"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1):e._e(),e.isLogin?e._e():t("el-form-item",{attrs:{prop:"captcha"}},[t("span",{staticClass:"svg-container",staticStyle:{"margin-right":"20px"},on:{click:e.changeCaptcha}},[t("i",{staticClass:"el-icon-refresh"})]),t("img",{attrs:{src:e.imageCaptcha}})]),e.isTimeOut?e._e():t("p",{staticStyle:{color:"white"}},[e._v(e._s(e.time))]),e.isTimeOut?t("p",{staticStyle:{color:"red"}},[e._v("Mã đã hết hạn")]):e._e(),e.isLogin?e._e():t("el-form-item",[t("span",{staticClass:"svg-container"},[t("i",{staticClass:"el-icon-eleme"})]),t("el-input",{attrs:{placeholder:"Nhập mã Captcha"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}})],1),t("el-tooltip",{staticStyle:{display:"none"},attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),t("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(e._s(e.btnLogin)+" ")])],1)],1)},a=[],i=(n("d9e2"),n("caad"),n("14d9"),n("13d5"),n("b64b"),n("d3b7"),n("2532"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("88a7"),n("271a"),n("5494"),n("bc3a")),s=n.n(i),r=n("5c96"),c=n("c1df"),l=n.n(c),p=n("c24f"),u=n("61f7"),h={name:"Login",data:function(){var e=function(e,t,n){Object(u["e"])(t)?n():n(new Error("Please enter the correct phone"))},t=function(e,t,n){t.length<6?n(new Error("The password can not be less than 6 digits")):n()};return{total:"",minutes:"--",seconds:"--",interval:0,loginForm:{phone:"",password:"",captcha:"",code:""},passwordType:"password",capsTooltip:!1,loading:!1,redirect:void 0,otherQuery:{},imageCaptcha:"",btnLogin:"Nhận OTP",isLogin:!1,keydata:window.location.protocol+"//"+window.location.host,timeOut:l()("4000"),isTimeOut:!1,loginRules:{phone:[{required:!0,trigger:"blur",validator:e}],code:[{required:!0,trigger:"blur",validator:t}]}}},computed:{time:function(){return this.timeOut.format("mm:ss")}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0},time:function(e){"00:00"===e&&(this.isTimeOut=!0)}},created:function(){var e=this;this.getCaptcha(),setInterval((function(){e.timeOut=l()(e.timeOut.subtract(1,"seconds"))}),1e3)},methods:{changeCaptcha:function(){this.getCaptcha()},checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.isTimeOut?Object(r["Message"])({message:"Mã đã hết hạn",type:"error",duration:5e3}):this.isLogin?this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:"/",query:e.otherQuery}),e.loading=!1})).catch((function(){e.$message.error("Mã OTP không chính xác"),e.loading=!1}))})):Object(p["f"])({keydata:this.keydata,capstr:this.loginForm.captcha}).then((function(t){1===t.error_code?Object(r["Message"])({message:"Mã Captcha không chính xác",type:"error",duration:5e3}):0===t.error_code&&Object(p["c"])({phone:e.loginForm.phone}).then((function(t){var n;0===t.error_code?(e.timeOut=l()(125e3),e.btnLogin="Login",e.isLogin=!0):1===t.error_code&&null!==t&&void 0!==t&&null!==(n=t.error_msg)&&void 0!==n&&n.includes("Bạn vừa lấy mã xác nhận")?(e.$message.error("Bạn vừa lấy mã OTP".concat(t.error_msg.split("Bạn vừa lấy mã xác nhận")[1])),e.getCaptcha()):(e.$message.error(t.error_msg),e.getCaptcha())}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,n){return"redirect"!==n&&(t[n]=e[n]),t}),{})},onEvent:function(){this.$refs.recaptcha.execute()},getCaptcha:function(){var e=this;this.keydata=Math.floor(1e5*Math.random()),s.a.get("https://cms-wap-thuky.vcallid.com/admin/get-captcha",{params:{keydata:this.keydata},responseType:"blob"}).then((function(t){var n=window.URL||window.webkitURL;e.timeOut=l()(12e4),e.isTimeOut=!1,e.imageCaptcha=n.createObjectURL(t.data)}))},backCaptcha:function(){this.loginForm.captcha="",this.loginForm.code="",this.isLogin=!1,this.getCaptcha()}}},d=h,m=(n("c9e8"),n("52c7"),n("2877")),g=Object(m["a"])(d,o,a,!1,null,"af446c88",null);t["default"]=g.exports},c9e8:function(e,t,n){"use strict";n("9311")}}]);