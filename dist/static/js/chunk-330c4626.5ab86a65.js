(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-330c4626"],{1620:function(t,e,i){t.exports=i.p+"static/img/action.71472cd9.svg"},"1ba8":function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var a=i("d4ec"),o=i("bee2"),n=i("8f33"),s=i("262e"),r=(i("99af"),i("6c6e")),c=i("b775"),l="https://cms-wap-thuky.vcallid.com",u=function(t){function e(){return Object(a["a"])(this,e),Object(n["a"])(this,e,["admin-club"])}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"search",value:function(t){return Object(c["a"])({url:l+"/".concat(this.uri,"/search"),method:"get",params:t})}},{key:"list",value:function(t){return Object(c["a"])({url:l+"/".concat(this.uri,"/list"),method:"get",params:t})}},{key:"list_member",value:function(t,e){return Object(c["a"])({url:l+"/".concat(this.uri,"/list_member/").concat(e),method:"get",params:t})}},{key:"change_status_public",value:function(t,e){return Object(c["a"])({url:l+"/".concat(this.uri,"/change_status_public/").concat(e),method:"post",data:t})}},{key:"add_user_club",value:function(t,e){return Object(c["a"])({url:l+"/".concat(this.uri,"/add_user_club/").concat(e),method:"post",data:t})}},{key:"store",value:function(t){return Object(c["a"])({url:l+"/".concat(this.uri,"/store"),method:"post",data:t})}},{key:"detail",value:function(t){return Object(c["a"])({url:l+"/".concat(this.uri,"/detail/").concat(t),method:"post"})}},{key:"update",value:function(t,e){return Object(c["a"])({url:l+"/".concat(this.uri,"/update/").concat(e),method:"post",data:t})}}]),e}(r["a"])},2320:function(t,e,i){t.exports=i.p+"static/img/picture.c184bc52.svg"},2332:function(t,e,i){"use strict";i("5d96")},"307d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("el-tabs",{staticClass:"demo-tabs",attrs:{type:"border-card"}},[e("el-tab-pane",{scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"custom-tabs-label"},[e("el-icon",[e("calendar")],1),e("span",[t._v("Duyệt bài viết")])],1)]},proxy:!0}])},[e("section",{staticClass:"tab_content"},[e("ReportViolations",{attrs:{"object-data":t.objectDetail}})],1)])],1)],1)},o=[],n=i("c7eb"),s=i("1da1"),r=(i("d3b7"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"mt-30"},[t._l(t.list_post,(function(i,a){return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingSearchPost,expression:"loadingSearchPost"}],key:a,staticClass:"mt-30",staticStyle:{"margin-bottom":"50px"}},[e("PostItem",{attrs:{post:i,"is-action-button":!1},on:{onApprovalPost:t.onApprovalPost}})],1)})),e("div",{ref:"end-location"}),e("infinite-loading",{ref:"infiniteLoading",attrs:{identifier:t.infiniteId},on:{infinite:t.infiniteHandler}},[e("div",{attrs:{slot:"no-more"},slot:"no-more"},[t._v("Hết bài đăng")]),e("div",{attrs:{slot:"no-results"},slot:"no-results"},[t._v("Hết bài đăng")])])],2)])}),c=[],l=i("2909"),u=(i("99af"),i("14d9"),i("2320")),d=i.n(u),p=i("e5f6"),h=i("a248"),m=new h["a"],f={name:"Post",components:{PostItem:p["a"]},props:{objectData:{type:Object,default:function(){return{}}}},data:function(){return{formRequest:{},icons:{iconPicture:d.a},list_post:[],loadingSearchPost:!1,infiniteId:+new Date,showDialogDialogPost:!1,objectDataDialogPost:{},isAdd:!0,queryParams:{type:1,page:1,number:5},position:0,loading:!1}},created:function(){this.onGetListPost()},methods:{infiniteHandler:function(t){var e=this;return Object(s["a"])(Object(n["a"])().mark((function i(){var a,o,s,r;return Object(n["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.loading){i.next=11;break}return e.queryParams.page+=1,e.loadingSearchPost=!0,i.next=5,m.listPost(e.queryParams);case 5:a=i.sent,o=a.error_code,s=a.data,e.loadingSearchPost=!1,0===+o&&(r=e.$refs["end-location"].getBoundingClientRect().top+window.pageYOffset,e.position&&window.scrollTo(0,e.position),e.position=r,e.list_post=[].concat(Object(l["a"])(e.list_post),Object(l["a"])(s)),console.log("list_post......",e.list_post)),s.length>=e.queryParams.number?t.loaded():t.complete();case 11:case"end":return i.stop()}}),i)})))()},onGetListPost:function(){var t=this;this.loading=!0,this.queryParams.club_id=this.$route.params.id,this.queryParams.is_confirm=0,m.listPost(this.queryParams).then((function(e){var i=e.error_code,a=e.data,o=e.error_msg;0===i?(t.list_post=a,t.loading=!1,t.infiniteId+=1):t.$message.error(o)})).catch((function(t){})).finally((function(){t.loading=!1}))},handleAdd:function(){this.showDialogDialogPost=!0,this.objectDataDialogPost={},this.isAdd=!0},onApprovalPost:function(){var t=this;return Object(s["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.showDialogDialogPost=!1,t.list_post=[],t.infiniteId=+new Date,t.queryParams={type:1,page:1,number:5},t.onGetListPost();case 5:case"end":return e.stop()}}),e)})))()},handleAction:function(){this.$router.push("/club/detail/".concat(this.$route.params.id,"/post"))}}},g=f,b=(i("6da7"),i("2877")),v=Object(b["a"])(g,r,c,!1,null,"212176b3",null),y=v.exports,_=i("bcc2"),x=i("6b9b"),w=i("1ba8"),j=new w["a"],S={name:"ActionPost",components:{ReportViolations:y},props:{objectData:{type:Object,default:function(){return{}}},showDialog:{type:Boolean,default:!1}},data:function(){return{loadingTable:!1,query:{page:1,limit:10},total:10,tableData:[],objectDetail:{}}},watch:{objectData:function(t){console.log("...................",t),t&&(this.objectDetail=t,this.onGetList())}},created:function(){this.onGetDetail()},methods:{onGetDetail:function(){var t=this;return Object(s["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingTable=!0,e.next=3,t.trim_string_object(t.query);case 3:console.log("..........",t.query),j.detail(t.$route.params.id).then((function(e){var i=e.error_code,a=e.data,o=e.error_msg;0===i?t.objectDetail=a:t.$message.error(o)})).catch((function(t){})).finally((function(){t.loadingTable=!1}));case 5:case"end":return e.stop()}}),e)})))()},formatNumber:_["h"],convertDateTime:_["c"],trim_string_object:x["a"]}},C=S,D=(i("c836"),Object(b["a"])(C,a,o,!1,null,"ba9ac262",null));e["default"]=D.exports},"41b2c":function(t,e,i){"use strict";i("5837")},5837:function(t,e,i){},"5ae1":function(t,e,i){},"5d96":function(t,e,i){},"65d7":function(t,e,i){},"6b9b":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("b64b"),i("d3b7"),i("498a"),i("159b");var a=function(t){return Object.keys(t).forEach((function(e){t[e]="string"===typeof t[e]?t[e].trim():t[e]})),t}},"6da7":function(t,e,i){"use strict";i("5ae1")},"8a79":function(t,e,i){"use strict";var a=i("23e7"),o=i("4625"),n=i("06cf").f,s=i("50c4"),r=i("577e"),c=i("5a34"),l=i("1d80"),u=i("ab13"),d=i("c430"),p=o("".slice),h=Math.min,m=u("endsWith"),f=!d&&!m&&!!function(){var t=n(String.prototype,"endsWith");return t&&!t.writable}();a({target:"String",proto:!0,forced:!f&&!m},{endsWith:function(t){var e=r(l(this));c(t);var i=arguments.length>1?arguments[1]:void 0,a=e.length,o=void 0===i?a:h(s(i),a),n=r(t);return p(e,o-n.length,o)===n}})},a882:function(t,e,i){},c035:function(t,e,i){"use strict";i("a882")},c836:function(t,e,i){"use strict";i("65d7")},e5f6:function(t,e,i){"use strict";i("99af"),i("d81d"),i("fb6a");var a=function(){var t,e,i=this,a=i._self._c;return a("div",{staticStyle:{border:"1px solid #999",padding:"10px 20px","border-radius":"10px","margin-bottom":"20px"}},[a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("el-avatar",{attrs:{size:50,src:null===(t=i.post)||void 0===t||null===(t=t.User)||void 0===t?void 0:t.avatar}}),a("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center",padding:"0 10px",flex:"1"}},[a("p",{staticStyle:{margin:"0","font-size":"15px","font-weight":"500"}},[i._v(i._s(null===(e=i.post)||void 0===e||null===(e=e.User)||void 0===e?void 0:e.fullname))]),a("span",{staticStyle:{"font-size":"12px","font-style":"italic",color:"#999"}},[i._v(i._s(i.post.created_at))])]),a("el-popover",{ref:"popoverRef",attrs:{placement:"top",width:"250",trigger:"click"}},[a("div",{staticStyle:{"background-color":"rgb(239 236 233 / 30%)","border-radius":"10px",display:"flex","flex-direction":"column","align-items":"start","justify-content":"center"}},[a("el-button",{staticStyle:{border:"none","background-color":"transparent"},attrs:{icon:"el-icon-info"}},[i._v(" Thông tin bài viết ")]),a("el-button",{staticStyle:{border:"none","background-color":"transparent",margin:"0"},attrs:{icon:"el-icon-edit"}},[i._v(" Chỉnh sửa bài viết ")]),a("el-button",{staticStyle:{border:"none","background-color":"transparent",margin:"0"},attrs:{icon:"el-icon-delete"}},[i._v(" Xóa bài viết ")])],1),i.isActionButton?a("el-button",{staticStyle:{border:"none",color:"transparent","background-color":"transparent"},attrs:{slot:"reference"},slot:"reference"},[a("el-image",{staticStyle:{height:"auto"},attrs:{src:i.icons.iconAction}})],1):i._e()],1)],1),a("div",{staticStyle:{"font-size":"14px"}},[a("p",{class:i.isShowContent?"show-content c-body2 c-inherit-text c-bold-text mb-0 mt-20":"hide-content c-body2 c-inherit-text c-bold-text mb-0 mt-20",domProps:{innerHTML:i._s(i.post.content)}}),a("el-button",{staticClass:"c-body2 c-link-text c-bold-text mb-0 cursor-pointer",staticStyle:{border:"none",background:"transparent",padding:"0",margin:"0 !important"},on:{click:i.onShowContent}},[a("p",{staticStyle:{"font-weight":"700"}},[i._v(i._s(i.more))])])],1),a("div",{on:{click:function(t){return i.showCarousel(i.post)}}},[1==i.post.list_img_display.length?a("div",i._l(i.post.list_img_display.map((function(t){return t.img_path})),(function(t,e){return a("div",{key:e},[i.isVideo(t)?[a("video",{staticStyle:{width:"99%","max-width":"400px","max-height":"100%",height:"400px","object-fit":"contain"},attrs:{src:t,controls:""}})]:[a("el-image",{staticStyle:{width:"100%","max-width":"800px","max-height":"100%",height:"400px","object-fit":"contain"},attrs:{alt:"image",src:t}})]],2)})),0):2==i.post.list_img_display.length?a("div",[a("el-row",{staticStyle:{display:"flex"}},[i._l(i.post.list_img_display.map((function(t){return t.img_path})),(function(t,e){return[a("el-col",{key:e,attrs:{sm:12}},[i.isVideo(t)?[a("video",{staticStyle:{width:"99%","max-width":"400px","max-height":"100%",height:"400px","object-fit":"contain"},attrs:{src:t,controls:""}})]:[a("el-image",{staticStyle:{width:"99%","max-width":"400px","max-height":"100%",height:"400px","object-fit":"contain"},attrs:{alt:"image",src:t}})]],2)]}))],2)],1):3==i.post.list_img_display.map((function(t){return t.img_path})).length||4==i.post.list_img_display.map((function(t){return t.img_path})).length?a("div",[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{flex:"1"}},i._l(i.post.list_img_display.map((function(t){return t.img_path})).slice(0,2),(function(t,e){return a("div",{key:e},[i.isVideo(t)?[a("video",{staticStyle:{width:"99%","max-width":"400px","max-height":"100%",height:"200px","object-fit":"contain"},attrs:{src:t,controls:""}})]:[a("el-image",{staticStyle:{width:"99%","max-width":"400px","max-height":"100%",height:"200px","object-fit":"contain"},attrs:{alt:"image",src:t}})]],2)})),0),a("div",{staticStyle:{flex:"1"}},i._l(i.post.list_img_display.map((function(t){return t.img_path})).slice(2),(function(t,e){return a("div",{key:e+100},[i.isVideo(t)?[a("video",{style:"width: ".concat(3===i.post.list_img_display.map((function(t){return t.img_path})).length?"100%":"99%","; max-width: 400px; max-height: 100%; height: ").concat(3===i.post.list_img_display.map((function(t){return t.img_path})).length?"400px":"200px","; object-fit: contain;"),attrs:{src:t,controls:""}})]:[a("el-image",{style:"width: ".concat(3===i.post.list_img_display.map((function(t){return t.img_path})).length?"100%":"99%","; max-width: 400px; max-height: 100%; height: ").concat(3===i.post.list_img_display.map((function(t){return t.img_path})).length?"400px":"200px","; object-fit: contain;"),attrs:{alt:"image",src:t}})]],2)})),0)])]):a("div",[a("div",{staticStyle:{display:"flex"}},[a("div",i._l(i.post.list_img_display.slice(0,2),(function(t,e){return a("div",{key:e},[i.isVideo(t)?[a("video",{staticStyle:{width:"99%","max-width":"400px",height:"auto","max-height":"200px","object-fit":"contain"},attrs:{src:t,controls:""}})]:[a("el-image",{staticStyle:{width:"99%","max-width":"400px",height:"auto","max-height":"200px","object-fit":"contain"},attrs:{alt:"image",src:t}})]],2)})),0),a("div",i._l(i.post.list_img_display.slice(2,5),(function(t,e){return a("div",{key:e+100,staticClass:"image-item"},[i.isVideo(t)?[a("video",{staticStyle:{width:"99%","max-width":"400px",height:"auto","max-height":"130px","object-fit":"contain"},attrs:{src:t,controls:""}})]:[a("el-image",{staticStyle:{width:"99%","max-width":"400px",height:"auto","max-height":"130px","object-fit":"contain"},attrs:{alt:"image",src:t}})],2==e?a("div",{staticClass:"overlay"},[a("span",{staticStyle:{color:"#fff","font-size":"24px","font-weight":"700"}},[i._v("+"+i._s(i.post.list_img_display.length-5))])]):i._e()],2)})),0)])])]),i.isActionButton?i._e():a("div",{staticClass:"line"},[a("hr")]),i.isActionButton?i._e():a("p",{staticStyle:{"font-size":"13px"},domProps:{innerHTML:i._s(i.post.msg)}}),i.isActionButton?i._e():a("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[a("el-button",{staticStyle:{border:"none","border-radius":"10px",background:"linear-gradient(45deg, #15B0F6, #0B60AE)"},on:{click:function(t){return i.handleApproval(i.post)}}},[a("span",{staticStyle:{color:"#fff"}},[i._v("Duyệt")])])],1),a("CarouselItem",{attrs:{"object-data":i.objectDataShowCarousel,"show-dialog":i.showDialogShowCarousel},on:{onCloseDialog:i.handleClose}})],1)},o=[],n=i("c7eb"),s=i("1da1"),r=(i("8a79"),i("1620")),c=i.n(r),l=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"dialogCarousel",staticStyle:{"text-align":"center"},attrs:{top:"2vh","show-close":!1,visible:t.showDialog,width:"60%","before-close":t.handleClose},on:{"update:visible":function(e){t.showDialog=e}}},[e("div",{staticStyle:{"background-color":"#333"}},[e("carousel",{ref:"myCarousel",attrs:{"per-page":1,autoplay:!1,"navigation-enabled":!0,"pagination-enabled":!1}},t._l(t.list_media,(function(i,a){return e("slide",{key:a,staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t.isVideo(i)?e("div",[e("video",{staticClass:"carousel-image",attrs:{src:i,controls:""}})]):e("div",[e("img",{staticClass:"carousel-image",attrs:{src:i,alt:"image"}})])])})),1)],1)])},u=[],d={name:"CarouselItem",props:{objectData:{type:Object,default:function(){return{}}},showDialog:{type:Boolean,default:!1}},data:function(){return{list_media:[]}},watch:{objectData:function(t){console.log("val..............",t),t&&(this.list_media=null===t||void 0===t?void 0:t.list_media)}},methods:{handleClose:function(){this.list_media=[],this.$emit("onCloseDialog",{dialog:!1,reload:!1})},isVideo:function(t){return t.endsWith(".mp4")}}},p=d,h=(i("2332"),i("c035"),i("2877")),m=Object(h["a"])(p,l,u,!1,null,"85e54274",null),f=m.exports,g=i("a248"),b=new g["a"],v={name:"PostItem",components:{CarouselItem:f},props:{post:{type:Object,default:function(){return{}}},isActionButton:{type:Boolean,default:!1}},data:function(){return{icons:{iconAction:c.a},isShowContent:!1,more:"Xem thêm",showDialog:!1,objectData:{},isCarouselVisible:!1,objectDataShowCarousel:{},showDialogShowCarousel:!1,salePaxForm:{}}},methods:{onShowContent:function(){this.more=this.isShowContent?"Xem thêm":"Rút gọn",this.isShowContent=!this.isShowContent},handleApproval:function(t){var e=this;this.$confirm("Bạn có chắc chắn muốn thực hiện thao tác này").then(function(){var i=Object(s["a"])(Object(n["a"])().mark((function i(a){var o,s;return Object(n["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:o={uid:101253},s={post_id:t.id},b.approvalPost(o,s).then((function(t){0===t.error_code?(e.$emit("onApprovalPost",{dialog:!1,reload:!1}),e.$message.success(t.data)):e.$message.error(t.error_msg)}));case 3:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}())},isVideo:function(t){return t.endsWith(".mp4")},showCarousel:function(t){var e;this.showDialogShowCarousel=!0,this.objectDataShowCarousel=Object.assign({},{list_media:(null===(e=t.list_img_display)||void 0===e?void 0:e.map((function(t){return t.img_path})))||[]})},handleClose:function(){this.showDialogShowCarousel=!1}}},y=v,_=(i("41b2c"),Object(h["a"])(y,a,o,!1,null,"7a68c7af",null));e["a"]=_.exports}}]);