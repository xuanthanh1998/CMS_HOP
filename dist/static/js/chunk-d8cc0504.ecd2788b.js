(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8cc0504"],{"015c":function(e,t,a){"use strict";a("5fbc")},"1af5":function(e,t,a){"use strict";a.r(t);a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reservation_booking"},[t("el-row",{staticClass:"app-container list-account"},[t("el-row",{staticClass:"list-account__header"},[t("el-col",{attrs:{sm:24}},[t("h3",{staticClass:"title"},[e._v("Quản lý doanh nghiệp")])]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddCompany}},[e._v("Thêm mới ")])],1),t("div",{staticClass:"filter-container mt-10"},[t("el-row",[t("el-col",{staticClass:"mr-10 pb-10",attrs:{sm:24,md:4,lg:4}},[t("el-select",{staticClass:"w-100",attrs:{clearable:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm doanh nghiệp","remote-method":e.onSearchCompany,loading:e.loadingSearchCompany},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}},e._l(e.Companies,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" Tìm kiếm ")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh"},on:{click:e.onRefreshSearch}},[e._v("Refresh")])],1)],1),t("el-row",{staticClass:"list-account__data"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{label:"STT",width:"50",align:"center",type:"index",index:e.handleIndexMethod}}),t("el-table-column",{attrs:{prop:"name",label:"Tên doanh Nghiệp ",align:"center"}}),t("el-table-column",{attrs:{label:"Logo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.logo_url_path?t("el-image",{staticStyle:{width:"100px",height:"auto"},attrs:{src:n.logo_url_path}}):t("span",[e._v("Không có ảnh")])]}}])}),t("el-table-column",{attrs:{label:"Background",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.img_background?t("el-image",{staticStyle:{width:"100px",height:"auto"},attrs:{src:n.img_background}}):t("span",[e._v("Không có ảnh")])]}}])}),t("el-table-column",{attrs:{label:"Địa chỉ",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.address?a.address:"")+" ")]}}])}),t("el-table-column",{attrs:{label:"Giới thiệu",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.about?a.about:"")+" ")]}}])}),t("el-table-column",{attrs:{label:"Số điện thoại",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.hotline?a.hotline:"")+" ")]}}])}),t("el-table-column",{attrs:{label:"Email",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.email?a.email:"")+" ")]}}])}),t("el-table-column",{attrs:{label:"Link web",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-link",{attrs:{type:"success",href:n.facebook_link,target:"_blank"}},[e._v(" "+e._s(n.facebook_link?n.facebook_link:"")+" ")])]}}])}),t("el-table-column",{attrs:{label:"trạng thái",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-tag",{attrs:{type:1===n.is_public?"success":"danger"}},[e._v(e._s(e.arrayYesNo[n.is_public]))])]}}])}),t("el-table-column",{attrs:{label:"Ngày tạo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.convertDate(a.created_at))+" ")]}}])}),t("el-table-column",{attrs:{label:"Người tạo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.admin?a.admin.name:"")+" ")]}}])}),t("el-table-column",{attrs:{label:"Hành động",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-button",{staticClass:"mb-2",staticStyle:{"background-color":"#3642A7",color:"white"},attrs:{icon:"el-icon-plus",size:"mini",round:""},on:{click:function(t){return e.handleListMember(n)}}},[e._v(" DS member ")]),t("el-button",{staticClass:"mb-2",attrs:{type:"warning",icon:"el-icon-edit",size:"mini",round:""},on:{click:function(t){return e.handleEditCompany(n)}}},[e._v(" Sửa ")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:function(t){return e.handleDeleteCompany(n.id)}}},[e._v(" Xóa ")])]}}])})],1),t("el-row",{staticClass:"list-shop__footer"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>e.query.limit,expression:"total > query.limit"}],attrs:{total:e.total,limit:e.query.limit,page:e.query.page},on:{"update:limit":function(t){return e.$set(e.query,"limit",t)},"update:page":function(t){return e.$set(e.query,"page",t)},pagination:e.onGetList}})],1),t("dialog-add-company",{attrs:{"show-dialog":e.showDialogAddCompany,"object-data":e.objectData,"is-add":e.isAdd},on:{onCloseDialog:e.handleClose}}),t("dialog-list-member-company",{attrs:{"show-dialog":e.showDialogListMember,"object-data":e.objectDataListMember},on:{onCloseDialog:e.handleCloseListMember}})],1)],1)],1)},o=[],r=(a("d81d"),a("d3b7"),a("333d")),i=a("bcc2"),l=a("c1df"),s=a.n(l),u=a("a248"),c=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.dialog.titleName,visible:e.showDialog,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.objectData}},[t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"Tên doanh nghiệp:",required:""}},[t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{prop:"name",placeholder:"Tên doanh nghiệp"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.name,callback:function(t){e.$set(e.formRequest,"name",t)},expression:"formRequest.name"}})],1)],1),t("el-form-item",{attrs:{label:"Địa chỉ:",required:""}},[t("el-form-item",{attrs:{prop:"address"}},[t("el-input",{attrs:{prop:"name",placeholder:"Địa chỉ"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.address,callback:function(t){e.$set(e.formRequest,"address",t)},expression:"formRequest.address"}})],1)],1),t("el-form-item",{attrs:{label:"Giới thiệu:",required:""}},[t("el-form-item",{attrs:{prop:"about"}},[t("el-input",{attrs:{prop:"name",type:"textarea",placeholder:"Giới thiệu"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.about,callback:function(t){e.$set(e.formRequest,"about",t)},expression:"formRequest.about"}})],1)],1),t("el-form-item",{attrs:{label:"Số điện thoai:",required:""}},[t("el-form-item",{attrs:{prop:"hotline"}},[t("el-input",{attrs:{prop:"name",placeholder:"Số điện thoai"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.hotline,callback:function(t){e.$set(e.formRequest,"hotline",t)},expression:"formRequest.hotline"}})],1)],1),t("el-form-item",{attrs:{label:"Link web:",required:""}},[t("el-form-item",{attrs:{prop:"facebook_link"}},[t("el-input",{attrs:{prop:"name",placeholder:"Link web"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.facebook_link,callback:function(t){e.$set(e.formRequest,"facebook_link",t)},expression:"formRequest.facebook_link"}})],1)],1),t("el-form-item",{attrs:{label:"email:",required:""}},[t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{attrs:{prop:"name",placeholder:"email"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.email,callback:function(t){e.$set(e.formRequest,"email",t)},expression:"formRequest.email"}})],1)],1),t("el-form-item",{attrs:{label:"Trạng thái:"}},[t("el-select",{attrs:{placeholder:"trạng thái hiển thị"},model:{value:e.formRequest.is_public,callback:function(t){e.$set(e.formRequest,"is_public",t)},expression:"formRequest.is_public"}},e._l(e.arrayStatus,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),!0===e.isAdd?t("el-form-item",{attrs:{label:"vID chủ tịch:",required:""}},[t("el-form-item",{attrs:{prop:"user_admin"}},[t("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"Tìm kiếm mã VID","remote-method":e.onSearchGolfer,loading:e.loadingSearchUser},model:{value:e.formRequest.user_admin,callback:function(t){e.$set(e.formRequest,"user_admin",t)},expression:"formRequest.user_admin"}},e._l(e.users,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),t("el-form-item",{attrs:{label:"Logo doanh nghiệp:",required:""}},[t("el-form-item",{attrs:{prop:"upload"}},[t("el-upload",{ref:"ruleForm",staticClass:"upload-demo",attrs:{"file-list":e.listImage,action:"uploadURL","list-type":"picture",multiple:"","on-change":e.onPickImage,"on-remove":e.removeFile,"on-preview":e.previewFile,"auto-upload":!1,limit:1,"on-exceed":function(t,a){return e.handleExceed(t,a,1)}}},[t("el-button",{attrs:{type:"primary"}},[e._v(" Upload poster")])],1)],1)],1),t("el-form-item",{attrs:{label:"Background doanh nghiệp:"}},[t("el-form-item",{attrs:{prop:"upload"}},[t("el-upload",{ref:"ruleForm",staticClass:"upload-demo",attrs:{"file-list":e.listImageBackground,action:"uploadURL","list-type":"picture",multiple:"","on-change":e.onPickImageBackground,"on-remove":e.removeFileBackground,"on-preview":e.previewFile,"auto-upload":!1,limit:1,"on-exceed":function(t,a){return e.handleExceed(t,a,1)}}},[t("el-button",{attrs:{type:"primary"}},[e._v(" Upload poster")])],1)],1)],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("Hủy")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:function(t){return e.onSubmitForm("ruleForm")}}},[e._v(e._s(e.dialog.buttonName))])],1)],1)},d=[],m=a("c7eb"),p=a("5530"),h=a("1da1"),f=(a("99af"),a("a434"),a("25f0"),a("61f7")),g=a("5c96"),b=a("8ffd"),_=a("5f87"),y=a("ec26"),v=a("bc3a"),k=a.n(v),w=a("8ce5"),C=new w["a"],S=new u["a"],q=[{value:1,label:"Hiển thị"},{value:0,label:"Không hiển thị"}],j={name:"DialogAddCompany",props:{objectData:{type:Object,default:function(){return{}}},organizationData:{type:Array,default:function(){return[]}},showDialog:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!1}},data:function(){return{editorConfig:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker","editing"]},{name:"forms",groups:["forms"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"tools",groups:["tools"]},{name:"others",groups:["others"]},{name:"about",groups:["about"]}],height:300,line_height:"1"},arrayStatus:[].concat(q),loadingSubmit:!1,dialogLoading:!1,loadingSearchFacility:!1,loadingSearchUser:!1,loadingSearchClub:!1,is_global_show:!1,isShowOrganizationChild:!1,loadingSearchOption:!1,organizationChild:[],formRequest:{user_create_club:Object(_["a"])().id,name:null,logo_url_path:"",address:null,about:null,hotline:null,email:null,facebook_link:null,type_club:4},request:{},query:{limit:10,page:1},listImage:[],listImageBackground:[],uploadFileLoading:!1,listRemoveFile:[],round:[],facilities:[],users:[],clubs:[],paths:[],facilityModel:{},file:null,fileBackground:null,dialog:{titleName:"Thêm mới doanh nghiệp",buttonName:"Thêm mới"},organization:null,loadingSearchCompany:!1}},computed:{},watch:{objectData:function(e){var t=this;return Object(h["a"])(Object(m["a"])().mark((function a(){return Object(m["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("value1211111111111",e),t.isAdd?e&&(t.formRequest=Object(p["a"])(Object(p["a"])({},t.formRequest),e),console.log("this.formRequest.....................",t.formRequest)):(t.formRequest=Object(p["a"])(Object(p["a"])({},t.formRequest),e),t.listImage=e.logo_url_path?[{url:e.logo_url_path}]:[],t.listImageBackground=e.img_background?[{url:e.img_background}]:[]);case 2:case"end":return a.stop()}}),a)})))()},isAdd:function(e){console.log("isAdd",e),this.dialog=e?Object.assign({},{titleName:"Thêm mới doanh nghiệp",buttonName:"Thêm mới"}):Object.assign({},{titleName:"Cập nhật doanh nghiệp",buttonName:"Cập nhật"})}},methods:{onSearchGolfer:function(e){var t=this;C.searchGolfer({keyword:e}).then((function(e){var a=e.data;0===e.error_code?(a.length>0?t.users=a.map((function(e){var t="vID".concat(e.id," - ").concat(e.fullname);return{value:e.id,label:t,phone:e.phone}})):t.users=[],t.loadingSearchUser=!1):t.$message.error(e.error_msg)}))},onSubmitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(h["a"])(Object(m["a"])().mark((function e(a){var n;return Object(m["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=13;break}return t.loadingSubmit=!0,e.next=4,t.appendForm();case 4:if(n=e.sent,console.log("ffffffffffffff",n),!t.isAdd){e.next=11;break}return e.next=9,t.handleSubmitAdd(n);case 9:e.next=13;break;case 11:return e.next=13,t.handleSubmitUpdate(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleSubmitAdd:function(e){var t=this;return Object(h["a"])(Object(m["a"])().mark((function a(){return Object(m["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:S.storeCompany(e).then(function(){var e=Object(h["a"])(Object(m["a"])().mark((function e(a){return Object(m["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==a.error_code){e.next=7;break}return t.$message.success(a.error_msg),t.$emit("onCloseDialog",{dialog:!1,reload:!0}),e.next=5,t.resetformRequest();case 5:e.next=8;break;case 7:t.$message.error(a.error_msg);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loadingSubmit=!1}));case 1:case"end":return a.stop()}}),a)})))()},handleSubmitUpdate:function(e){var t=this;return Object(h["a"])(Object(m["a"])().mark((function a(){return Object(m["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:S.updateCompany(e,e.id).then((function(e){0===e.error_code?(t.$message.success(e.error_msg),t.$emit("onCloseDialog",{dialog:!1,reload:!0}),t.resetformRequest()):t.$message.error(e.error_msg)})).finally((function(){t.loadingSubmit=!1}));case 1:case"end":return a.stop()}}),a)})))()},resetformRequest:function(){var e=this;return Object(h["a"])(Object(m["a"])().mark((function t(){return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve((e.formRequest={user_create_club:Object(_["a"])().id,name:null,logo_url_path:"",address:null,about:null,hotline:null,email:null,facebook_link:null,type_club:4},e.listImage=[],e.listImageBackground=[]));case 2:e.$refs["ruleForm"].clearValidate();case 3:case"end":return t.stop()}}),t)})))()},handleClose:function(){this.$emit("onCloseDialog",{dialog:!1,reload:!1}),this.resetformRequest()},onPickImage:function(e,t){var a=this;return Object(h["a"])(Object(m["a"])().mark((function n(){var o,r,l;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("value___________",e),"image/png"!==(null===e||void 0===e||null===(o=e.raw)||void 0===o?void 0:o.type)&&"image/jpg"!==(null===e||void 0===e||null===(r=e.raw)||void 0===r?void 0:r.type)&&"image/jpeg"!==(null===e||void 0===e||null===(l=e.raw)||void 0===l?void 0:l.type)&&"success"!==e.status?(Object(g["Message"])({message:"Yêu cầu định dạng ảnh là JPG, JPEG, PNG",type:"warning",duration:5e3}),t.pop(),a.listImage=t):e.size>4e6?(Object(g["Message"])({message:"Kích thước ảnh tối đa là 4 MB, bạn đang chọn ảnh ".concat(e.name," với kích thước ").concat(Object(i["h"])(e.size)," B"),type:"warning",duration:5e3}),t.pop(),a.listImage=t):a.file=e.raw;case 2:case"end":return n.stop()}}),n)})))()},onPickImageBackground:function(e,t){var a=this;return Object(h["a"])(Object(m["a"])().mark((function n(){var o,r,l;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("value___________",e),"image/png"!==(null===e||void 0===e||null===(o=e.raw)||void 0===o?void 0:o.type)&&"image/jpg"!==(null===e||void 0===e||null===(r=e.raw)||void 0===r?void 0:r.type)&&"image/jpeg"!==(null===e||void 0===e||null===(l=e.raw)||void 0===l?void 0:l.type)&&"success"!==e.status?(Object(g["Message"])({message:"Yêu cầu định dạng ảnh là JPG, JPEG, PNG",type:"warning",duration:5e3}),t.pop(),a.listImageBackground=t):e.size>4e6?(Object(g["Message"])({message:"Kích thước ảnh tối đa là 4 MB, bạn đang chọn ảnh ".concat(e.name," với kích thước ").concat(Object(i["h"])(e.size)," B"),type:"warning",duration:5e3}),t.pop(),a.listImageBackground=t):a.fileBackground=e.raw;case 2:case"end":return n.stop()}}),n)})))()},removeFile:function(e){delete this.formRequest.logo_url_path,this.file=null},removeFileBackground:function(e){delete this.formRequest.img_background,this.fileBackground=null},previewFile:function(e){this.isAdd?window.open(e.url,"_blank"):window.open(b["a"]+e.url,"_blank")},handleExceed:function(e,t,a){Object(g["Message"])({message:"Tối đa là ".concat(a," file, bạn đang chọn ").concat(e.length+t.length," file"),type:"warning",duration:5e3})},uploadFileToServe:function(e){return Object(h["a"])(Object(m["a"])().mark((function t(){var a,n,o,r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new File([e],"".concat(Object(y["a"])().toString(),".png"),{type:e.type}),n="https://api-v2.vcallid.com/api/utils/upload/data",o=new FormData,o.append("image",a),t.next=6,k.a.post(n,o,{headers:{"content-type":"multipart/form-data"}});case 6:return r=t.sent,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})))()},appendForm:function(){var e=this;return Object(h["a"])(Object(m["a"])().mark((function t(){var a,n,o;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.formRequest,null==e.file||!Object(f["b"])(a.logo_url_path)){t.next=6;break}return t.next=4,e.uploadFileToServe(e.file);case 4:n=t.sent,n&&(a.logo_url_path=n.data.name);case 6:if(null==e.fileBackground||!Object(f["b"])(a.img_background)){t.next=11;break}return t.next=9,e.uploadFileToServe(e.fileBackground);case 9:o=t.sent,o&&(a.img_background=o.data.name);case 11:return a.title=e.formRequest.name,t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})))()},handleCloseTag:function(e){this.rounds.splice(this.rounds.indexOf(e),1)},formatNumber:i["h"]}},O=j,D=(a("a48a"),a("2877")),x=Object(D["a"])(O,c,d,!1,null,"0415c54a",null),R=x.exports,F=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"Danh sách thành viên doanh nghiệp",visible:e.showDialog,"before-close":e.handleClose,fullscreen:"",center:""},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-row",[t("el-col",{staticClass:"mb-10"},[t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddMemberCompany}},[e._v(" Thêm mới ")])],1)],1),t("el-row",{staticStyle:{margin:"20px","font-family":"Sans-serif"}},[t("div",{staticClass:"filter-container"}),t("el-row",{staticStyle:{width:"100%"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{label:"STT",width:"100",align:"center",type:"index",index:e.handleIndexMethod}}),t("el-table-column",{attrs:{prop:"user_id",label:"vID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s("vID".concat(a.user_id))+" ")]}}])}),t("el-table-column",{attrs:{label:"Họ tên",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.user?a.user.fullname:"")+" ")]}}])}),t("el-table-column",{attrs:{label:"Quyền",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[1===n.is_moderator&&1===n.is_user_admin?t("el-tag",{attrs:{type:"success"}},[e._v("Chủ tịch")]):1===n.is_moderator?t("el-tag",{attrs:{type:"primary"}},[e._v("Ban điều hành")]):0===n.is_moderator?t("el-tag",{attrs:{type:"primary"}},[e._v("thành viên")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"Hành động",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[1!==n.is_user_admin?t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:function(t){return e.handleDeleteCompany(n.id)}}},[e._v(" Xóa ")]):e._e()]}}])})],1),t("el-row",{staticClass:"list-device__footer"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>=e.query.limit,expression:"total >= query.limit"}],staticStyle:{padding:"0"},attrs:{total:e.total,limit:e.query.limit,page:e.query.page},on:{"update:limit":function(t){return e.$set(e.query,"limit",t)},"update:page":function(t){return e.$set(e.query,"page",t)},pagination:e.onGetListMember}})],1)],1)],1),t("el-dialog",{attrs:{width:"50%",title:"thêm thành viên",visible:e.innerVisible,"before-close":e.handleCloseDialog,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"ruleForm",staticClass:"demo-ruleForm"},[t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"vID thành viên:",required:""}},[t("el-form-item",{attrs:{prop:"user_id"}},[t("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"Tìm kiếm mã VID","remote-method":e.onSearchGolfer,loading:e.loadingSearchUser},model:{value:e.formRequest.user_id,callback:function(t){e.$set(e.formRequest,"user_id",t)},expression:"formRequest.user_id"}},e._l(e.users,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",{attrs:{label:"Quyền thành viên:"}},[t("el-select",{attrs:{placeholder:"Quyền thành viên"},model:{value:e.roles,callback:function(t){e.roles=t},expression:"roles"}},e._l(e.arrayRole,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCloseDialog}},[e._v("Hủy")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:function(t){return e.onSubmitForm("ruleForm")}}},[e._v("Thêm mới")])],1)],1)],1)},L=[],T=new u["a"],$=new w["a"],I=[{value:1,label:"Ban điều hành"},{value:2,label:"Thành viên"}],M={name:"DialogListMemberCompany",components:{Pagination:r["a"]},props:{objectData:{type:Object,default:function(){return{}}},showDialog:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!1}},data:function(){return{arrayRole:[].concat(I),users:[],innerVisible:!1,loadingTable:!1,query:{page:1,limit:10},total:10,tableData:[],loadingSearchUser:!1,showDialogAddEvent:!1,dialogLoading:!1,formRequest:{is_user_admin:0,is_moderator:0,is_treasurer:0,invited_by_user_id:null,is_accepted:1,is_banner_post_club:0,user_id:null,is_vice_president:0,is_captain:0,is_general_secretary:0},loadingSubmit:!1,event_id:0,listImage:[],uploadFileLoading:!1,listRemoveFile:[],files:[],roles:""}},watch:{objectData:function(e){e&&(this.query.club_id=e.id,this.formRequest.club_id=e.id,this.onGetListMember())},roles:function(e){this.formRequest=1===e?{is_user_admin:0,is_moderator:1,is_treasurer:0,invited_by_user_id:null,is_accepted:1,is_banner_post_club:0,is_vice_president:0,is_captain:0,is_general_secretary:0,club_id:this.objectData.id,user_id:this.formRequest.user_id}:{is_user_admin:0,is_moderator:0,is_treasurer:0,invited_by_user_id:null,is_accepted:1,is_banner_post_club:0,is_vice_president:0,is_captain:0,is_general_secretary:0,club_id:this.objectData.id,user_id:this.formRequest.user_id}}},created:function(){},methods:{handleEditCompany:function(e){this.isAdd=!1,this.showDialogAddEvent=!0,this.objectData=Object.assign({},e)},handleDeleteCompany:function(e){var t=this;this.$confirm("Bạn có chắc chắn xóa thành viên này không ?").then((function(a){T.removeMemberCompany(e).then((function(e){0===e.error_code?(t.onGetListMember(),t.$message.success(e.error_msg)):t.$message.error(e.error_msg)}))}))},onSearchGolfer:function(e){var t=this;$.searchGolfer({keyword:e}).then((function(e){var a=e.data;0===e.error_code?(a.length>0?t.users=a.map((function(e){var t="vID".concat(e.id," - ").concat(e.fullname);return{value:e.id,label:t,phone:e.phone}})):t.users=[],t.loadingSearchUser=!1):t.$message.error(e.error_msg)}))},onGetListMember:function(){var e=this;return Object(h["a"])(Object(m["a"])().mark((function t(){return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadingTable=!0,T.listMemberCompany(e.query).then((function(t){var a=t.error_code,n=t.data;0===a?(e.tableData=t.data.data,e.total=n.total):e.$message.error(t.message)})).catch((function(e){})).finally((function(){e.loadingTable=!1}));case 2:case"end":return t.stop()}}),t)})))()},handleAddMemberCompany:function(){this.innerVisible=!0},handleCloseDialog:function(){this.innerVisible=!1,this.onResetDialog()},onSubmitForm:function(){var e=this;T.storeMemberCompany(this.formRequest).then(function(){var t=Object(h["a"])(Object(m["a"])().mark((function t(a){return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==a.error_code){t.next=8;break}return e.$message.success(a.error_msg),e.innerVisible=!1,e.onResetDialog(),t.next=6,e.onGetListMember();case 6:t.next=9;break;case 8:e.$message.error(a.error_msg);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){e.loadingSubmit=!1}))},onResetDialog:function(){this.formRequest=Object.assign({},{})},handleIndexMethod:function(e){return 1===this.query.page?this.query.page+e:(this.query.page-1)*this.query.limit+e+1},handleClose:function(){this.$emit("onCloseDialog",{dialog:!1,reload:!1})}}},A=M,G=(a("7997"),Object(D["a"])(A,F,L,!1,null,"296a6f8b",null)),B=G.exports,z={1:"Hiển thị",0:"khóa"},N=new u["a"],U={name:"List",components:{DialogListMemberCompany:B,DialogAddCompany:R,Pagination:r["a"]},data:function(){return{arrayYesNo:z,tableData:[],loadingTable:!1,total:0,isAdd:!0,onShowDialog:!1,query:{limit:10,page:1},loadingData:!0,from:0,showDialogAddCompany:!1,loadingSearchCompany:!1,objectData:{},objectDataListMember:{},dateRange:"",Companies:[],showDialogListMember:!1,statusEvent:{0:"Sắp diễn ra",1:"Đang diễn ra",2:"Hoàn thành"}}},watch:{dateRange:function(e){e?(this.query.start_date=s()(e[0]).unix(),this.query.end_date=s()(e[1]).unix()):(this.query.start_date="",this.query.end_date="")}},created:function(){this.onGetList()},methods:{convertDate:i["a"],onRefreshSearch:function(){this.query=Object.assign({},{limit:10,page:1}),this.onGetList()},handleListMember:function(e){this.showDialogListMember=!0,this.objectDataListMember=Object.assign({},e)},handleCloseListMember:function(e){this.showDialogListMember=e.dialog,e.reload&&(this.query=Object.assign({},{limit:10,page:1}),this.onGetList())},convertDateTime:i["c"],onGetList:function(){var e=this;this.loadingTable=!0,N.listCompany(this.query).then((function(t){var a,n;0===t.error_code?(e.tableData=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)||[],e.total=(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.total)||0,console.log("this.tableData___________",e.tableData)):e.$message.error(t.error_msg)})).finally((function(){e.loadingTable=!1}))},handleFilter:function(){this.query.page=1,this.onGetList()},handleIndexMethod:function(e){return 1===this.query.page?this.query.page+e:10*this.query.page+e},onReset:function(){this.query=Object.assign({},{limit:10,page:1}),this.dateRange="",this.onGetList()},handleClose:function(e){this.showDialogAddCompany=e.dialog,e.reload&&(this.query=Object.assign({},{limit:10,page:1}),this.onGetList())},handleAddCompany:function(){this.isAdd=!0,this.showDialogAddCompany=!0,this.objectData={}},handleEditCompany:function(e){this.isAdd=!1,this.showDialogAddCompany=!0,this.objectData=Object.assign({},e)},onSearchCompany:function(e){var t=this;this.loadingSearchCompany=!0,N.searchCompany({keyword_company:e}).then((function(e){var a=e.data;0===e.error_code?a.length>0?(t.paths=[],t.Companies=a.map((function(e){return{value:e.id,label:e.name}}))):t.Companies=[]:t.$message.error(e.error_msg)})).finally((function(){t.loadingSearchCompany=!1}))},handleDeleteCompany:function(e){var t=this;this.$confirm("Bạn có chắc chắn xóa doanh nghiệp này không ?").then((function(a){N.removeCompany(e).then((function(e){0===e.error_code?(t.onGetList(),t.$message.success(e.error_msg)):t.$message.error(e.error_msg)}))}))},formatDate:i["g"],formatNumber:i["h"]}},E=U,P=(a("6474"),Object(D["a"])(E,n,o,!1,null,"872423e4",null));t["default"]=P.exports},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},o=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var n=l(),o=e-n,s=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=s;var l=Math.easeInOutQuad(u,n,o,t);i(l),u<t?r(e):a&&"function"===typeof a&&a()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},c=u,d=(a("015c"),a("2877")),m=Object(d["a"])(c,n,o,!1,null,"001cdde0",null);t["a"]=m.exports},"5fbc":function(e,t,a){},6474:function(e,t,a){"use strict";a("a1099")},"6e3f":function(e,t,a){},7997:function(e,t,a){"use strict";a("ea4c")},"8ce5":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("d4ec"),o=a("bee2"),r=a("8f33"),i=a("262e"),l=a("6c6e"),s=a("b775"),u="https://cms-wap-thuky.vcallid.com",c=function(e){function t(){return Object(n["a"])(this,t),Object(r["a"])(this,t,["golfer"])}return Object(i["a"])(t,e),Object(o["a"])(t,[{key:"searchGolfer",value:function(e){return Object(s["a"])({url:u+"/".concat(this.uri,"/search"),method:"get",params:e})}},{key:"getInGolfer",value:function(e){return Object(s["a"])({url:u+"/".concat(this.uri,"/get-in-golfer"),method:"post",data:e})}},{key:"checkGolferExists",value:function(e){return Object(s["a"])({url:u+"/".concat(this.uri,"/check-golfer-exists"),method:"post",data:e})}}]),t}(l["a"])},"8ffd":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="https://cms-wap-thuky.vcallid.com/"},a1099:function(e,t,a){},a48a:function(e,t,a){"use strict";a("6e3f")},ea4c:function(e,t,a){},ec26:function(e,t,a){"use strict";const n="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var o={randomUUID:n};let r;const i=new Uint8Array(16);function l(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const s=[];for(let d=0;d<256;++d)s.push((d+256).toString(16).slice(1));function u(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}function c(e,t,a){if(o.randomUUID&&!t&&!e)return o.randomUUID();e=e||{};const n=e.random||(e.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=n[e];return t}return u(n)}t["a"]=c}}]);